# ISSUE-389
- Issue: #389
- Branch: task/389-deploy-ready-r020
- PR: https://github.com/Leeky1017/SS/pull/392, https://github.com/Leeky1017/SS/pull/399

## Plan
- Generate pinned `requirements.txt` from `pyproject.toml`.
- Document the generation command and update strategy.
- Ensure Docker build assets install from the lock file (or document pending Dockerfile wiring).

## Runs

### 2026-01-12 15:05 Create GitHub issue
- Command: `gh issue create -t "[DEPLOY-READY] DEPLOY-READY-R020: Add pinned requirements.txt (exported from pyproject.toml)" ...`
- Key output: `https://github.com/Leeky1017/SS/issues/389`
- Evidence: `openspec/specs/ss-deployment-docker-readiness/task_cards/remediation__DEPLOY-READY-R020.md`

### 2026-01-12 15:06 Worktree setup
- Command: `scripts/agent_worktree_setup.sh "389" "deploy-ready-r020"`
- Key output: `Worktree created: .worktrees/issue-389-deploy-ready-r020`
- Evidence: `git worktree list`

### 2026-01-12 15:07 Rulebook task
- Command: `rulebook task create issue-389-deploy-ready-r020 && rulebook task validate issue-389-deploy-ready-r020`
- Key output: `✅ Task issue-389-deploy-ready-r020 is valid`
- Evidence: `rulebook/tasks/issue-389-deploy-ready-r020/`

### 2026-01-12 15:13 Generate pinned requirements.txt
- Command: `python3 -m venv .venv && . .venv/bin/activate && python -m pip install -U pip pip-tools && pip-compile --strip-extras pyproject.toml -o requirements.txt`
- Key output: `requirements.txt` generated by `pip-compile` (pinned `==` versions)
- Evidence: `requirements.txt`

### 2026-01-12 15:16 Wire Docker assets + document update strategy
- Command: `rg -n "pip install" openspec/specs/ss-deployment-docker-minio/assets/docker-compose.yml`
- Key output: `ss` service installs deps via `python -m pip install -r requirements.txt`
- Evidence:
  - `openspec/specs/ss-deployment-docker-minio/assets/docker-compose.yml`
  - `openspec/specs/ss-deployment-docker-readiness/spec.md`

### 2026-01-12 15:18 ruff
- Command: `. .venv/bin/activate && ruff check .`
- Key output: `All checks passed!`
- Evidence: `ruff check .`

### 2026-01-12 15:18 pytest
- Command: `. .venv/bin/activate && pytest -q`
- Key output: `184 passed, 5 skipped in 10.65s`
- Evidence: `pytest -q`

### 2026-01-12 15:25 PR preflight
- Command: `scripts/agent_pr_preflight.sh`
- Key output: `OK: no overlapping files with open PRs`
- Evidence: `scripts/agent_pr_preflight.sh`

### 2026-01-12 15:26 PR create
- Command: `gh pr create ...`
- Key output: `https://github.com/Leeky1017/SS/pull/392`
- Evidence: `gh pr view --web`

### 2026-01-12 15:26 Enable auto-merge
- Command: `gh pr merge --auto --squash 392`
- Key output: `will be automatically merged via squash when all requirements are met`
- Evidence: `gh pr merge --auto --squash`

### 2026-01-12 15:27 Check status
- Command: `gh pr checks --watch 392`
- Key output: `All checks were successful`
- Evidence: `gh pr checks --watch`

### 2026-01-12 15:28 Merge verification
- Command: `gh pr view 392 --json state,mergedAt,mergeStateStatus,reviewDecision`
- Key output: `state=MERGED mergedAt=2026-01-12T07:22:41Z`
- Evidence: `gh pr view 392`

### 2026-01-12 15:45 Archive Rulebook task
- Command: `rulebook task archive issue-389-deploy-ready-r020`
- Key output: `✅ Task issue-389-deploy-ready-r020 archived successfully`
- Evidence: `rulebook/tasks/archive/2026-01-12-issue-389-deploy-ready-r020/`

### 2026-01-12 15:55 Wire Dockerfile to the pinned requirements lock
- Command: `rg -n "pip install" Dockerfile`
- Key output: Dockerfile installs `-r requirements.txt` then installs `.` with `--no-deps`
- Evidence: `Dockerfile`
