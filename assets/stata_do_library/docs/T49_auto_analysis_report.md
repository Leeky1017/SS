# T49_auto_analysis_report — 自动化分析报告（Automated Analysis Report）

## 任务元信息

| 属性 | 值 |
|------|-----|
| **Task ID** | T49_auto_analysis_report |
| **任务名称** | 自动化分析报告 |
| **任务族** | J - 报告与打包 |
| **难度级别** | basic |
| **数据结构** | cross_sectional |
| **金融场景适用** | ✓ 是 |

## 任务摘要

自动执行一套标准分析流程，生成综合报告。**一站式快速分析工具**。

## 适用场景

### 场景 1：数据探索
- **目的**：快速了解数据特征
- **方法**：自动化分析
- **应用**：初步数据探索

### 场景 2：快速原型
- **目的**：快速生成分析结果
- **方法**：标准化流程
- **应用**：会议报告、初步汇报

### 场景 3：教学演示
- **目的**：展示完整分析流程
- **方法**：一键执行
- **应用**：教学、培训

## 报告内容

自动化报告包含六个部分：

| 部分 | 内容 |
|------|------|
| **PART 1** | 数据概览（样本量、缺失值） |
| **PART 2** | 描述统计（均值、标准差、分位数） |
| **PART 3** | 分布可视化（直方图） |
| **PART 4** | 相关分析（相关系数矩阵） |
| **PART 5** | 回归分析（OLS、稳健OLS） |
| **PART 6** | 诊断检验（异方差、共线性、设定） |

## 数据文件要求

### 数据文件
- **首选**：`data.dta`（Stata 格式）
- **备选**：`data.csv`（自动转换为 data.dta）
- **编码**：UTF-8（推荐）

### 变量要求
- 必须包含因变量和自变量
- 数值变量用于描述统计
- 允许包含缺失值（会报告缺失情况）

## 输入与占位符说明

### 占位符列表

| 占位符 | 含义 | 类型 | 必填 | 合法取值示例 |
|--------|------|------|------|-------------|
| `__NUMERIC_VARS__` | 数值变量列表 | 多变量名 | ✓ 是 | `y x1 x2 x3` |
| `__DEPVAR__` | 因变量 | 单变量名 | ✓ 是 | `y` |
| `__INDEPVARS__` | 自变量列表 | 多变量名 | ✓ 是 | `x1 x2 x3` |

## 输出文件清单与 Schema

### 0. result.log

任务执行日志，包含数据概览、描述统计、相关分析、回归结果、诊断检验和结果摘要。

### 1. table_T49_summary.csv

描述统计表。

| 列名 | 类型 | 说明 |
|------|------|------|
| `N` | int | 样本量 |
| `mean` | float | 均值 |
| `sd` | float | 标准差 |
| `min` | float | 最小值 |
| `p25` | float | 25分位数 |
| `p50` | float | 中位数 |
| `p75` | float | 75分位数 |
| `max` | float | 最大值 |

### 2. table_T49_regression.csv

回归系数表。

| 列名 | 类型 | 说明 |
|------|------|------|
| `variable` | string | 变量名 |
| `coef` | float | 系数 |
| `se` | float | 标准误 |
| `t` | float | t统计量 |
| `p` | float | p值 |

### 3. fig_T49_distribution.png

因变量分布直方图（PNG格式）。

## 上层 JSON 配置示例

```json
{
  "task_id": "T49_auto_analysis_report",
  "description": "快速数据分析",
  "numeric_vars": ["revenue", "profit", "assets", "employees"],
  "dep_var": "profit",
  "indep_vars": ["revenue", "assets", "employees"]
}
```

## 报告写作骨架

```markdown
## 第X章 实证分析

### X.1 数据概览

本研究使用的样本包含[N]个观测值，共[K]个变量。
缺失值情况：[变量1]有[n1]个缺失，[变量2]完整...

### X.2 描述统计

表X报告了主要变量的描述统计。因变量[Y]的均值为[mean]，
标准差为[sd]，表明样本[分布特征]...

### X.3 相关分析

表X报告了变量间的相关系数。[X1]与[Y]显著正相关（r=[r]，p<0.01），
初步支持假设H1...

### X.4 回归分析

表X报告了OLS回归结果。[X1]系数为[β1]（p<0.01），
表明[经济含义]...

异方差检验、多重共线性检验和模型设定检验均通过，
表明模型设定合理。
```

## 常见坑与建议

### 1. 变量选择
- **问题**：包含不相关变量
- **建议**：根据研究目的筛选变量

### 2. 结果解读
- **问题**：自动报告不提供解读
- **建议**：需要人工解读结果

### 3. 模型适用性
- **问题**：OLS不一定适用
- **建议**：根据数据特征选择模型

## 与其他任务的关系

| 相关任务 | 关系说明 |
|----------|----------|
| T50_export_outputs_bundle | 输出打包 |
| T07_descriptive_univariate | 详细描述统计 |
| T17_ols_baseline | 详细回归分析 |

## 技术说明

- **Stata 版本**：18.0+
- **外部依赖**：无，仅使用 Stata 官方命令
- **关键命令**：`describe`, `misstable`, `summarize`, `tabstat`, `pwcorr`, `regress`, `estat hettest`, `estat vif`, `estat ovtest`
- **退出码**：错误时统一返回 200
