# TU12_spline — 样条回归

## 任务元信息

| 属性 | 值 |
|------|-----|
| **Task ID** | TU12_spline |
| **任务名称** | 样条回归 |
| **任务族** | U - 高级方法 |
| **难度级别** | advanced |
| **数据结构** | 面板/截面数据 |

## 任务摘要

使用样条函数进行灵活的非线性回归分析。通过`mkspline`命令创建线性或三次样条基函数，允许因变量与自变量之间存在分段线性或平滑的非线性关系。

## 适用场景

### 场景 1：剂量-反应关系
- 分析药物剂量与疗效的非线性关系
- 识别阈值效应和饱和效应

### 场景 2：年龄-收入曲线
- 建模年龄与收入的非线性关系
- 识别收入峰值年龄

## 输入与占位符说明

| 占位符 | 含义 | 类型 | 必填 | 默认值 |
|--------|------|------|------|--------|
| `__DEPVAR__` | 因变量 | 变量名 | ✓ 是 | - |
| `__XVAR__` | 自变量 | 变量名 | ✓ 是 | - |
| `__N_KNOTS__` | 节点数 | 整数 | 否 | 3 |
| `__SPLINE_TYPE__` | 样条类型 | 字符串 | 否 | linear |

## 输出文件清单

| 文件名 | 类型 | 说明 |
|--------|------|------|
| `fig_TU12_spline.png` | 图形 | 样条拟合图 |
| `table_TU12_spline.csv` | 表格 | 样条回归结果 |
| `data_TU12_spline.dta` | 数据 | 输出数据 |
| `result.log` | 日志 | 执行日志 |

## 技术说明

- **Stata 版本**：18.0+
- **关键命令**：`mkspline`、`bspline`
- **外部依赖**：无
- **样条类型**：linear（分段线性）、cubic（三次样条）
